/* ========================================================== 
 * 
 * bootstrap-maxlength.js v 1.5.3 
 * Copyright 2014 Maurizio Napoleoni @mimonap
 * Licensed under MIT License
 * URL: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 *
 * ========================================================== */

(function(e){"use strict";e.fn.extend({maxlength:function(t,n){function s(e){var n=e.val();n=n.replace(new RegExp("\r?\n","g"),"\n");var r=0;if(t.utf8){r=o(e.val())}else{r=e.val().length}return r}function o(e){var t=0;for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t++}else if(r>127&&r<2048){t=t+2}else{t=t+3}}return t}function u(e,n,r){var i=true;if(!t.alwaysShow&&r-s(e)>n){i=false}return i}function a(e,t){var n=t-s(e);return n}function f(e){e.css({display:"block"})}function l(e){e.css({display:"none"})}function c(e,n){var r="";if(t.message){r=t.message.replace("%charsTyped%",n).replace("%charsRemaining%",e-n).replace("%charsTotal%",e)}else{if(t.preText){r+=t.preText}if(!t.showCharsTyped){r+=e-n}else{r+=n}if(t.showMaxLength){r+=t.separator+e}if(t.postText){r+=t.postText}}return r}function h(e,n,r,i){i.html(c(r,r-e));if(e>0){if(u(n,t.threshold,r)){f(i.removeClass(t.limitReachedClass).addClass(t.warningClass))}else{l(i)}}else{f(i.removeClass(t.warningClass).addClass(t.limitReachedClass))}}function p(t){var n=t[0];return e.extend({},typeof n.getBoundingClientRect==="function"?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},t.offset())}function d(e,n){var r=p(e),i=e.outerWidth(),s=n.outerWidth(),o=n.width(),u=n.height();switch(t.placement){case"bottom":n.css({top:r.top+r.height,left:r.left+r.width/2-o/2});break;case"top":n.css({top:r.top-u,left:r.left+r.width/2-o/2});break;case"left":n.css({top:r.top+r.height/2-u/2,left:r.left-o});break;case"right":n.css({top:r.top+r.height/2-u/2,left:r.left+r.width});break;case"bottom-right":n.css({top:r.top+r.height,left:r.left+r.width});break;case"top-right":n.css({top:r.top-u,left:r.left+i});break;case"top-left":n.css({top:r.top-u,left:r.left-s});break;case"bottom-left":n.css({top:r.top+e.outerHeight(),left:r.left-s});break;case"centered-right":n.css({top:r.top+u/2,left:r.left+i-s-3});break}}function v(e){return e.attr("maxlength")||e.attr("size")}var r=e("body"),i={alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-danger",separator:" / ",preText:"",postText:"",showMaxLength:true,placement:"bottom",showCharsTyped:true,validate:false,utf8:false};if(e.isFunction(t)&&!n){n=t;t={}}t=e.extend(i,t);return this.each(function(){var n=e(this),i,s;e(window).resize(function(){if(s){d(n,s)}});n.focus(function(){var t=c(i,"0");i=v(n);if(!s){s=e('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(t)}if(n.is("textarea")){n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight());n.mouseup(function(){if(n.outerWidth()!==n.data("maxlenghtsizex")||n.outerHeight()!==n.data("maxlenghtsizey")){d(n,s)}n.data("maxlenghtsizex",n.outerWidth());n.data("maxlenghtsizey",n.outerHeight())})}r.append(s);var o=a(n,v(n));h(o,n,i,s);d(n,s)});n.blur(function(){s.remove()});n.keyup(function(){var e=a(n,v(n)),r=true;if(t.validate&&e<0){r=false}else{h(e,n,i,s)}return r})})}})})(jQuery)